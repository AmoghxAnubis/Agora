 Project Documentation: AgoraTagline: A Real-Time Collaborative Code EcosystemStack: React, Node.js, Express, Socket.io, Supabase1. Project OverviewAgora is a browser-based collaborative code editor where developers can gather in virtual "rooms" to write, debug, and execute code together in real-time. It is designed for technical interviews, pair programming, and educational workshops.Unlike a standard text editor, Agora utilizes Socket.io for millisecond-latency synchronization and Supabase for robust user authentication and persistent data storage.2. Technology StackComponentTechnologyUsageFrontendReact.js + ViteThe user interface and editor logic.StylingTailwind CSSModern, dark-mode styling.Real-Time EngineSocket.ioHandles the "live" keystroke data and user presence (ephemeral data).Backend APINode.js + ExpressHandles custom API routes and runs the Socket.io server.Database & AuthSupabaseReplaces MongoDB. Handles PostgreSQL database, Authentication (Google/GitHub login), and Row Level Security.Code EditorMonaco EditorThe core text editing component (same as VS Code).3. Key FeaturesMVP (Minimum Viable Product)Instant Room Generation: Users can create a room and get a unique URL to share.Live Collaboration: Changes made by one user are broadcast instantly to others via WebSockets.Supabase Auth: Users can sign up/login (via Email or GitHub) to save their work.Language Support: Syntax highlighting for JS, Python, C++, Java.Active Users List: See who is currently inside the room.Advanced FeaturesCloud Save: Authenticated users can save code snippets to their Supabase profile.Code Execution: Integrate Piston API to run code and view output.Room History: Owners can view previous versions of the code (using a simple versioning table in Supabase).4. Data ArchitectureWe will use a hybrid approach:Ephemeral Data (Socket.io): Keystrokes, cursor positions, and "who is online" status. This data is too fast for a database and doesn't need to be permanently saved every millisecond.Persistent Data (Supabase): User profiles, saved code snippets, room ownership, and chat history (optional).Supabase Schema (SQL)You will create these tables in your Supabase dashboard:Table 1: profiles (Extends default auth.users)id (uuid, references auth.users)username (text)avatar_url (text)created_at (timestamp)Table 2: roomsroom_id (text, Primary Key - e.g., the UUID generated by frontend)owner_id (uuid, references profiles.id)created_at (timestamp)Table 3: saved_codeid (int, Primary Key)room_id (text, references rooms.room_id)code_content (text)language (text)last_updated (timestamp)5. Development RoadmapPhase 1: Setup & Supabase AuthInitialize the React project (Vite) and Node server.Create a Supabase project.Install @supabase/supabase-js in the client.Build the Login/Signup Page.Milestone: A user can log in and see their dashboard.Phase 2: The "Agora" (Editor Interface)Set up the Monaco Editor component.Create the Sidebar to display room info.Implement the URL routing: /room/:roomId.Phase 3: The Real-Time Connection (Socket.io)Set up the socket.io server in Node.js.Client Event: Listen for editor onChange. Emit CODE_CHANGE to server.Server Event: Broadcast CODE_CHANGE to socket.to(roomId).Milestone: Two tabs open side-by-side; typing in one updates the other.Phase 4: Persistence (Connecting Sockets to Supabase)Add a "Save" button in the editor.When clicked, send an API request to Supabase to upsert (update or insert) the current code into the saved_code table.When a user joins an existing room, fetch the data from Supabase first, then connect via sockets.6. Folder StructurePlaintext/agora
  ├── /client (React)
  │     ├── /src
  │     │    ├── /components
  │     │    │     ├── Editor.jsx
  │     │    │     ├── Sidebar.jsx
  │     │    │     └── AuthForm.jsx
  │     │    ├── /pages
  │     │    │     ├── Home.jsx
  │     │    │     └── EditorPage.jsx
  │     │    ├── supabaseClient.js  <-- Initialize Supabase here
  │     │    ├── socket.js          <-- Initialize Socket.io here
  │     │    └── App.jsx
  │     └── package.json
  │
  ├── /server (Node)
  │     ├── server.js               <-- Socket.io & Express entry point
  │     └── package.json
  │
  └── README.md